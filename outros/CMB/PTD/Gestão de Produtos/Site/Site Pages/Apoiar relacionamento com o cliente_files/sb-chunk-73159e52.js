(window.msfast_searchux_sb_jsonp=window.msfast_searchux_sb_jsonp||[]).push([["pro-site-spnews"],{"8btz":function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n("wuwP"),u=n("kKJH"),c=n("a7o/"),i=n("e24R"),o=Object(i.a)("graphMicrosoft");var a,s=(a=[],{getCachedImage:function(e){var t,n;if(void 0===e)return null;try{for(var u=Object(r.__values)(a),c=u.next();!c.done;c=u.next()){var i=c.value;if(i.userId===e)return i.image}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return null},cacheImage:function(e,t){a.some((function(t){return t.userId===e}))||a.push({userId:e,image:t}),a.length>50&&a.shift()}});function f(e){return new Promise((function(t){var n=s.getCachedImage(e);if(n)return t(n);var i=function(e){return"https://graph.microsoft.com/v1.0/users/".concat(e,"/photo/$value")}(Object(c.e)(e));Object(u.a)(o(),(function(e){return{url:i,method:"GET",responseType:"blob",headers:Object(r.__assign)({"Content-Type":"image/jpeg"},e?{Authorization:"Bearer ".concat(e)}:{})}})).subscribe((function(n){if("undefined"!=typeof window){var r,u=window.URL.createObjectURL(n.response);s.cacheImage(e,u),t(u)}else t(n.response?(r=n.response,new Promise((function(e){var t=new FileReader;t.onloadend=function(){return e(t.result)},t.readAsDataURL(r)}))):"")}),(function(){return t("")}))}))}var d=n("G9Vw"),l=n("TBqy"),v=n("lZuS");function b(e){return(Object(d.a)()?f(e):new Promise((function(t,n){try{t(Object(l.b)(l.a.m,e,!1))}catch(e){n(e)}}))).then((function(e){return function(e){if("object"!=typeof window)return!1;var t=new Image;return t.src=e||"",Object(v.a)(t)}(e)?"":e}))}},G9Vw:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("KmCS"),u=Object(r.regs)("searchux.isTokenBasedProfileImagesEnabled",!1)},GWPu:function(e,t,n){"use strict";var r=n("s6/T");var u=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t},c=n("sWmr"),i=n("bKfh"),o=n("dWn0");var a=function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n},s=n("yp/Q"),f=n("EuMs");var d=function(e){return e.split("")},l=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var v=function(e){return l.test(e)},b="[\\ud800-\\udfff]",h="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",p="\\ud83c[\\udffb-\\udfff]",m="[^\\ud800-\\udfff]",O="(?:\\ud83c[\\udde6-\\uddff]){2}",j="[\\ud800-\\udbff][\\udc00-\\udfff]",g="(?:"+h+"|"+p+")"+"?",w="[\\ufe0e\\ufe0f]?"+g+("(?:\\u200d(?:"+[m,O,j].join("|")+")[\\ufe0e\\ufe0f]?"+g+")*"),y="(?:"+[m+h+"?",h,O,j,b].join("|")+")",S=RegExp(p+"(?="+p+")|"+y+w,"g");var P=function(e){return e.match(S)||[]};var _=function(e){return v(e)?P(e):d(e)},I=n("eHwz"),x=r.a?r.a.iterator:void 0;t.a=function(e){if(!e)return[];if(Object(i.a)(e))return Object(o.a)(e)?_(e):u(e);if(x&&e[x])return a(e[x]());var t=Object(c.a)(e);return("[object Map]"==t?s.a:"[object Set]"==t?f.a:I.a)(e)}},NaTl:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("wuwP"),u=n("ljXs"),c=n("cDcd"),i=n("HSwa"),o=n("grEz");function a(e){var t=Object(r.__read)(c.useState(!e.useVirtualFocus&&e.isAriaSelected||!1),2),n=t[0],a=t[1],s=c.useRef(null),f=e.onFocusChange,d=e.autoSelect,l=e.tabindex,v=e.useVirtualFocus,b=Object(o.b)(),h=b.getActive(),p=c.useRef(v?Object(u.a)():"").current,m=function(e){a(e),null==f||f(e)};c.useEffect((function(){return b.registerVirtualFocusCallback(p,m)}),[b,p]),c.useEffect((function(){if(d){var e=b.getActive();s.current&&!e&&b.setActive(s.current,!v)}})),c.useEffect((function(){return Object(i.f)(h,i.b,"true")&&Object(i.e)(h,i.d),function(){var e,t=null===(e=b.getActive())||void 0===e?void 0:e.parentElement;(null==t?void 0:t.id)!==(null==h?void 0:h.id)&&Object(i.i)(h,i.d)}}),[h]);var O=function(e){var t=e.children,n=e.focused,r=e.navType,u=e.id,o=e.autoSelect,a={child:c.Children.only("function"==typeof t?t(n):t)};"subnav"!==r?(a.role="option",a["aria-selected"]=Boolean(n),a[i.b]="true"):a[i.c]="true";u&&(a.id=u);o&&(a[i.a]=o);return a}(Object(r.__assign)(Object(r.__assign)({},e),{focused:n,id:p})),j=O.child,g=Object(r.__rest)(O,["child"]);return c.cloneElement(j,Object(r.__assign)(Object(r.__assign)({ref:s},g),v?{onMouseOver:function(e){var t,n,r;r=document.querySelector("[".concat(i.d,"]")),Object(i.i)(r,i.d);var u=b.getActive();u&&b.setVirtualFocus(u.id,!1),b.setHovered(e.currentTarget),null===(n=null===(t=j.props)||void 0===t?void 0:t.onMouseOver)||void 0===n||n.call(t,e)},onMouseLeave:function(e){var t,n;return b.clearHovered(),null===(n=null===(t=j.props)||void 0===t?void 0:t.onMouseLeave)||void 0===n?void 0:n.call(t,e)}}:{tabIndex:null!=l?l:-1,onFocus:function(){var e,t;m(!0),null===(t=null===(e=j.props)||void 0===e?void 0:e.onFocus)||void 0===t||t.call(e)},onBlur:function(){var e,t;m(!1),null===(t=null===(e=j.props)||void 0===e?void 0:e.onBlur)||void 0===t||t.call(e)}}))}},lJaw:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return c}));var r=["aspx","htm","html","mhtml"],u=function(e){return r.indexOf(e)>-1};function c(e){if(e){var t=e.lastIndexOf(".");if(t>-1)return e.substr(t)}return""}},lRRq:function(e,t,n){"use strict";var r=n("3MGJ"),u=n("bKfh");var c=function(e,t){return function(n,r){if(null==n)return n;if(!Object(u.a)(n))return e(n,r);for(var c=n.length,i=t?c:-1,o=Object(n);(t?i--:++i<c)&&!1!==r(o[i],i,o););return n}}(r.a);t.a=c},mT3x:function(e,t,n){"use strict";var r=Math.ceil,u=Math.max;var c=function(e,t,n,c){for(var i=-1,o=u(r((t-e)/(n||1)),0),a=Array(o);o--;)a[c?o:++i]=e,e+=n;return a},i=n("X//s"),o=n("tAHZ");var a=function(e){return function(t,n,r){return r&&"number"!=typeof r&&Object(i.a)(t,n,r)&&(n=r=void 0),t=Object(o.a)(t),void 0===n?(n=t,t=0):n=Object(o.a)(n),r=void 0===r?t<n?1:-1:Object(o.a)(r),c(t,n,r,e)}}();t.a=a},"yM/U":function(e,t,n){"use strict";n.r(t);var r=n("wuwP"),u=n("UlRC"),c=n("rpSO"),i=n("KmCS"),o=n("XgOi"),a=(n("Jvpx"),n("ohlq")),s=(n("6SpP"),n("eTzd")),f=n("DHVw"),d=n("/hiP");function l(e,t,n){return"".concat(n.sitePath,"/_api/search/query?QueryText='*'").concat(function(e){var t=e.departmentId,n=e.isHubSite;return"&QueryTemplate='({searchterms}) ContentTypeId:0x0101009D1CB255DA76424F860D91F20E6C4118*"+" AND PromotedState:2 AND ".concat((n&&t?b:v)(e),"'")}(n))+"&HitHighlightedProperties='Title'&StartRow=0&RowLimit=100"+"&Properties='ClientFunction:News,EnableMultiGeoSearch:".concat(e?"true":"false","'")+"&sortlist='LastModifiedTime:descending'&SelectProperties='ContentClass,ContentTypeId,DefaultEncodingURL,DocId,EditorOWSUSER,FileExtension,GeoLocationSource,LastModifiedTime,ModifiedBy,Path,SPWebUrl,SPSiteURL,SecondaryFileExtension,ServerRedirectedUrl,SiteId,Title,UniqueId,WebId'"+"&ClientType='".concat(t,"'&EnableQueryRules=false")}function v(e){var t=e.sitePath;return'Path:"'.concat(t,'"')}function b(e){var t=e.departmentId;return"(DepartmentId:".concat(t," OR DepartmentId:").concat(t.replace(/[{}]/g,""),")")}var h=Object(d.a)((function(e){return function(t){var n=t.clientId,u=t.site;return Object(f.a)({url:l(!0,n,u),method:"GET",headers:Object(r.__assign)({Accept:"application/json;odata=verbose","Content-Type":"application/json;odata=verbose"},e?{Authorization:"Bearer ".concat(e)}:{})})}}),{monitorName:"sitenews-rawPrefetch",cacheId:"sitenews-rawPrefetch",cacheVersion:"0",cacheItemLifetime:9e5,cacheKeyExtractor:function(e){return{sitePath:e.site.sitePath}}}),p=n("RkML"),m=n("sUxJ");var O=n("F6lS"),j="".concat(O.a,".sharePointSearchSiteNewsSuggestions"),g=function(){function e(e){this.site=e}return e.prototype.getId=function(){return"SearchSiteNewsSuggestionProvider"},e.prototype.createStream=function(e){return this.site?(t={site:this.site,clientId:Object(a.a)()},n=t.clientId,r=t.site,c=Object(m.a)(p.a),u.Observable.fromPromise(h({clientId:n,site:r,tokenProvider:Object(s.g)()})).select((function(e){return JSON.parse(e.xhr.responseText)})).select((function(e){return c(e)})).cache("mssearchux-cache-sitenews-mapped",{key:r.sitePath},"1.0.0",9e5,(function(){return!1}))).select((function(e){return e.value})).selectMany((function(e){return u.Observable.fromArray(e)})).specFilter(e,new o.a):u.Observable.empty();var t,n,r,c},e=Object(r.__decorate)([Object(r.__param)(0,Object(c.a)("site"))],e)}();t.default=g;Object(i.regs)(j,g)}}]);