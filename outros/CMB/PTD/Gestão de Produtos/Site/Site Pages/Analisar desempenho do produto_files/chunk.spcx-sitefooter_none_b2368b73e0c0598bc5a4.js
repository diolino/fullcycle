(window.webpackJsonp_764afdc3_183e_47f5_8d20_a62aff2b0881_0_1_0=window.webpackJsonp_764afdc3_183e_47f5_8d20_a62aff2b0881_0_1_0||[]).push([[23],{beuv:function(e,t,n){"use strict";n.r(t),n.d(t,"CompositeFooter",function(){return h});var a=n("17wl"),i=n("cDcd"),r=n("NacN"),o=n("UoEp"),s=n("jidH"),c=n("TOey"),d=n("K9kD"),l=n("ysJJ"),u=n("wrw2"),f=n("KL1q"),p=n("kwLa"),m=function(e){function t(t){var n=e.call(this,t)||this;return n._deferLoadComponent=function(){!n.state.ComponentModule&&n.props.moduleLoader&&n.props.modulePath&&n.props.moduleLoader.load(n.props.modulePath,n.props.getModule).then(function(e){if(n.props.moduleLoader.parse&&(e=n.props.moduleLoader.parse(e)),!e){var t="ReactDeferredComponent: component not found when loading ".concat(n.props.modulePath," ")+"- check your load and parse functions";console.error(t)}n._mounted?n.setState({ComponentModule:e}):n.state={ComponentModule:e}})},n._mounted=!1,n.state={ComponentModule:void 0},n._setupDeferLoadCallback(t),n}return Object(a.__extends)(t,e),t.prototype.render=function(){var e=this,t=this.state.ComponentModule;return t?i.createElement(t,Object(a.__assign)({ref:function(t){t&&Object(p.hoistMethods)(e,t)}},this.props.props),this.props.children):this.props.placeHolder||null},t.prototype.componentDidMount=function(){this._mounted||(this._mounted=!0)},t.prototype.UNSAFE_componentWillReceiveProps=function(e){this._setupDeferLoadCallback(e)},t.prototype._setupDeferLoadCallback=function(e){var t=e.customWaiter;t?t.then(this._deferLoadComponent):this._deferLoadComponent()},t}(i.Component);function _(e,t,n,i){var r={footerStrings:t,pageContext:i};if(n&&(r.theme=n),e&&Array.isArray(e))for(var s=0,c=e;s<c.length;s++){var d=c[s];d&&(d.name===o.t.footerNavLogo?r.logo=Object(a.__assign)(Object(a.__assign)({},r.logo),{srcImgUrl:d.url}):d.name===o.t.footerNavName?d.links&&d.links.length&&(r.logo=Object(a.__assign)(Object(a.__assign)({},r.logo),{name:d.links[0].name})):d.name===o.t.footerNavLinks&&(r.links=d.links))}return r}var h=function(e){function t(t){var n=e.call(this,t)||this;return n._onEditNavClicked=function(e,t,a){var i=o.t.footerNavLinks;n._getFooterNavNodes(i,!0,n.props.pageContext).then(function(e){e.name=i,e.links=e.links||[],n.props.onEditNavClicked(e,t,a)})},n._updateFooterFromServerData=function(e){void 0===e&&(e=n.props.pageContext);var t=new d.Qos({name:"CompositeFooter.GetFooterNodes"});n._getFooterNavNodes(o.t.footerNavParent,!1,e).then(function(e){n.setState({footerLinks:e?e.links:void 0}),n._originalNameAndLogoLinks=n._getLogoAndNameLinks(n.state.footerLinks),t.end({resultType:d.ResultTypeEnum.Success}),b()||d.Engagement.logData({name:"FooterNav.Render",extraData:{audienceTargetingEnabled:Boolean(null==e?void 0:e.isAudienceEnabled).toString(),audienceTargetingProvided:Boolean(null==e?void 0:e.isAudienceTargeted).toString(),audienceTargetingAffected:Boolean(null==e?void 0:e.isAudienceAffected).toString()}})}).catch(function(e){console.error("Error fetching footer nodes"),t.end({resultType:d.ResultTypeEnum.Failure,error:"Failed to get footer nodes: ".concat(e)})})},n._setDisplayedLinks=function(e){l.e.getInstance(n.props.pageContext).filter("SiteNav",e,"links").then(function(e){n.setState({footerLinks:e})})},n._isAudienceTargeted=function(e){var t=new s.e(n.props.pageContext);return l.e.containsAudienceTargetedNode(e)&&t.isNavAudienceTargetedEnabled()},n._isShowingPreview=!1,n._originalNameAndLogoLinks=n._getLogoAndNameLinks(n.props.footerNavigationNodes),n.state={footerLinks:n.props.footerNavigationNodes||[],theme:Object(u.getVariant)(t.theme||Object(f.getTheme)(),n._getEmphasis(t.chromeOptions))},n}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.footerNavigationNodes||this._updateFooterFromServerData(),this.props.footerNavigationNodes&&this._isAudienceTargeted(this.props.footerNavigationNodes)&&this._setDisplayedLinks(this.props.footerNavigationNodes)},t.prototype.UNSAFE_componentWillReceiveProps=function(e){e.footerNavigationNodes&&(this._isAudienceTargeted(e.footerNavigationNodes)?this._setDisplayedLinks(e.footerNavigationNodes):this.setState({footerLinks:e.footerNavigationNodes})),!this._isFetchLinksSiteNavigationKSActive()&&this.props.pageContext&&e.pageContext&&(this.props.pageContext.siteId===e.pageContext.siteId&&this.props.pageContext.webId===e.pageContext.webId||this._updateFooterFromServerData(e.pageContext));var t=!!(e.footerLinks||!e.footerLinks&&this.props.footerLinks);(t||void 0===e.footerLinks&&this._isShowingPreview)&&(this._handleFooterNameOrLogoChange(e.footerLinks||this._originalNameAndLogoLinks),this._isShowingPreview=t),e.chromeOptions&&e.chromeOptions.footer&&this.setState({theme:Object(u.getVariant)(e.theme||Object(f.getTheme)(),this._getEmphasis(e.chromeOptions))})},t.prototype.render=function(){if(this._isFooterEnabled){var e=this.state.footerLinks,t=this._getFooterLayout(),n=t===r.t.SIMPLE,i=t===r.t.EXTENDED,s=this.state.theme;if(n&&!this.props.simpleFooterStrings)return console.error("simpleFooterStrings must not be undefined when rendering the SimpleFooter layout"),null;if(i&&!this.props.megaFooterStrings)return console.error("megaFooterStrings must not be undefined when rendering the MegaFooter layout"),null;if(i)return this._megaFooterProps=function(e,t,n){var i={footerStrings:t};if(n&&(i.theme=n),e&&Array.isArray(e))for(var r=0,s=e;r<s.length;r++){var c=s[r];c&&(c.name===o.t.footerNavLogo?i.logo=Object(a.__assign)(Object(a.__assign)({},i.logo),{srcImgUrl:c.url}):c.name===o.t.footerNavName?c.links&&c.links.length&&(i.logo=Object(a.__assign)(Object(a.__assign)({},i.logo),{name:c.links[0].name})):c.name===o.t.footerNavLinks&&(i.sections=c.links?c.links.map(function(e){return{heading:{name:e.name,url:e.url},linkKey:e.key,items:e.links}}):[]))}return i}(e,this.props.megaFooterStrings,s),this._getDeferredMegaFooter(Object(a.__assign)(Object(a.__assign)({},this._megaFooterProps),{pageContext:this.props.pageContext,onEditNavClicked:this._onEditNavClicked,onFooterLinksUpdated:this._updateFooterFromServerData}));if(n)return this._simpleFooterProps={footerStrings:void 0},this._isFooterCustomized(this.state.footerLinks)?this._simpleFooterProps=_(this.state.footerLinks,this.props.simpleFooterStrings,s):this._simpleFooterProps=_([],this.props.simpleFooterStrings,s),this._getDeferredSimpleFooter(Object(a.__assign)(Object(a.__assign)({},this._simpleFooterProps),{pageContext:this.props.pageContext,onEditNavClicked:this._onEditNavClicked,onFooterLinksUpdated:this._updateFooterFromServerData}))}return null},t.prototype._getDeferredMegaFooter=function(e){var t={modulePath:"../MegaFooter/index",moduleLoader:{load:function(){return n.e(20).then(n.bind(null,"ZIny")).then(function(e){return e.MegaFooter})}},props:e};return i.createElement("div",null,i.createElement(m,Object(a.__assign)({},t)))},t.prototype._getDeferredSimpleFooter=function(e){var t={modulePath:"../SimpleFooter/index",moduleLoader:{load:function(){return n.e(21).then(n.bind(null,"65Qx")).then(function(e){return e.SimpleFooter})}},props:e};return i.createElement(m,Object(a.__assign)({},t))},t.prototype._getFooterLayout=function(){var e=r.t.SIMPLE;return this.props.chromeOptions&&this.props.chromeOptions.footer&&this.props.chromeOptions.footer.layout&&(e=this.props.chromeOptions.footer.layout),e},t.prototype._getEmphasis=function(e){if(e&&e.footer)switch(e.footer.emphasis){case r.e.Neutral:return c.e.Neutral;case r.e.Soft:return c.e.Soft;case r.e.None:return c.e.None;default:return c.e.Strong}return c.e.Strong},t.prototype._getFooterNavNodes=function(e,t,n){if(n){var a=o.t.footerNavLinks;return new s.e(n).getMenuState({menuNodeKey:e,skipAudienceFiltering:t,audienceFilterNodeKey:a}).then(function(e){return b()?{links:e&&e.links}:e})}Promise.reject("no page context")},Object.defineProperty(t.prototype,"_isFooterEnabled",{get:function(){return this.props.chromeOptions&&this.props.chromeOptions.footer?!this.props.chromeOptions.footer.hidden:!this.props.isFooterInitiallyHidden},enumerable:!1,configurable:!0}),t.prototype._handleFooterNameOrLogoChange=function(e){var t=this.state.footerLinks;t||(t=[]);for(var n=!1,a=!1,i=e?e.filter(function(e){return e?e.name===o.t.footerNavLogo:void 0})[0]:void 0,r=e?e.filter(function(e){return e?e.name===o.t.footerNavName:void 0})[0]:void 0,s=0;s<t.length&&(!n||!a);s++)t[s]&&t[s].name===o.t.footerNavName&&r?(t[s]=r,a=!0):t[s]&&t[s].name===o.t.footerNavLogo&&i&&(t[s]=i,n=!0);!n&&i&&t.push(i),!a&&r&&t.push(r),this.setState({footerLinks:t})},t.prototype._getLogoAndNameLinks=function(e){var t=[],n=e?e.filter(function(e){return e?e.name===o.t.footerNavLogo:void 0})[0]:void 0,a=e?e.filter(function(e){return e?e.name===o.t.footerNavName:void 0})[0]:void 0;return t.push(n||this._getDefaultLogoLink()),t.push(a||this._getDefaultTitleLink()),t},t.prototype._getDefaultLogoLink=function(){return{name:o.t.footerNavLogo,url:""}},t.prototype._getDefaultTitleLink=function(){return{name:o.t.footerNavName,url:void 0,links:[{name:"",url:void 0}]}},t.prototype._isFooterCustomized=function(e){return!(e&&1===e.length&&"3a94b35f-030b-468e-80e3-b75ee84ae0ad"===e[0].name&&!e[0].links)&&e&&e.length>0},t.prototype._isFetchLinksSiteNavigationKSActive=function(){return d.Killswitch.isActivated("40fb01c7-93d4-4b11-aa2d-fe4457728d5c","08/17/2020","refetch links after in-place navigation across sites")},Object(a.__decorate)([Object(f.customizable)("CompositeFooter",["footerLinks","theme"])],t)}(i.Component);function b(){return d.Killswitch.isActivated("1cd2d1c9-fdc8-4110-a71e-e8125063dd90","2020-09-01","Refine the audience targeting logging")}},kwLa:function(e,t,n){var a=n("fglE");e.exports=a._Utilities}}]);