(window.webpackJsonpb6917cb1_93a0_4b97_a84d_7cf49975d4ec_0_2_0=window.webpackJsonpb6917cb1_93a0_4b97_a84d_7cf49975d4ec_0_2_0||[]).push([[112],{lF8N:function(e,t,n){"use strict";n.d(t,"e",function(){return u});var a=n("ut3N"),i=n("EMa1"),r=function(){function e(){this._actionInProgress=!1}return e.prototype.executeActionAsync=function(e,t){var n=this;return this._actionInProgress?this._ensureNoActionInProgressAsync().then(function(){return n._executeAction(e,t)}):this._executeAction(e,t)},e.prototype._executeAction=function(e,t){var n=this;return this._actionInProgress=!0,this._currentlyRunningScenario=t,e(arguments).then(function(e){return n._actionInProgress=!1,n._currentlyRunningScenario=void 0,e}).catch(function(e){throw n._actionInProgress=!1,n._currentlyRunningScenario=void 0,e})},e.prototype._ensureNoActionInProgressAsync=function(){var e=this;return this._ensureConditionAsync(function(){return!e._actionInProgress})},e.prototype._ensureConditionAsync=function(t,n,r){var o=this;return void 0===n&&(n=i.t.defaultWaitTimeforEnsureCondition),void 0===r&&(r=i.t.defaultRetriesForEnsureCondition),new Promise(function(i,s){var c=function(d){if(a._TraceLogger.logVerbose(e._logSource,"ensureConditionAsync: numTries=="+d),t())i();else if(d>r){var l=o._currentlyRunningScenario||"unknown";s(new Error("".concat(e.exceedMaxTriesError," The current running task that is blocking the async queue: ").concat(l)))}else setTimeout(function(){return c(d+1)},n)};c(0)})},e.exceedMaxTriesError="Exceed max number of tries.",e._logSource=a._LogSource.create("ObsoleteAsyncQueue"),e}(),o=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return e._instance||(this._instance=new r)},enumerable:!1,configurable:!0}),e}(),s=function(){function e(e,t,n){this._task=e,this._taskId=t,this._scenarioName=n,this._taskArgs=arguments}return e.prototype.execute=function(){return Promise.race([this._task(this._taskArgs),this._promiseTimeout()])},Object.defineProperty(e.prototype,"scenarioName",{get:function(){return this._scenarioName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"taskId",{get:function(){return this._taskId},enumerable:!1,configurable:!0}),e.prototype._promiseTimeout=function(){var t=this;return new Promise(function(n,a){setTimeout(function(){a(new Error("AsyncQueue timeout failure for scenario: ".concat(t._scenarioName)))},e.asyncTaskTimeout)})},e.asyncTaskTimeout=2e4,e}(),c=s,d=n("M+LP"),l=function(){function e(){var e=this;this._executeTask=function(){var t=e._taskQueue.length?e._taskQueue[0]:void 0;return t?t.execute().then(function(t){return e._removeFirstTaskFromQueue(),t}).catch(function(t){throw e._removeFirstTaskFromQueue(),t}):Promise.resolve()},this._removeFirstTaskFromQueue=function(){e._taskQueue.length&&e._taskQueue.splice(0,1)},this._taskQueue=[],this._taskCounter=0}return e.prototype.executeActionAsync=function(e,t){if(!Object(d.e)(60662))return o.instance.executeActionAsync(e,t);var n=this._taskCounter++;return this._taskQueue.push(new c(e,n,t)),this._waitForTaskQueue(n).then(this._executeTask)},e.prototype._waitForTaskQueue=function(t){var n=this;return new Promise(function(i,r){var o=function(r){a._TraceLogger.logVerbose(e._logSource,"ensureConditionAsync: numTries=="+r),n._taskQueue.length&&t===n._taskQueue[0].taskId?i():setTimeout(function(){return o(r+1)},e.asyncTaskRepeatWaitTime)};o(0)})},e._logSource=a._LogSource.create("AsyncQueue"),e.asyncTaskRepeatWaitTime=100,e}(),u=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return e._instance||(this._instance=new l)},enumerable:!1,configurable:!0}),e}()},mRj4:function(e){e.exports=JSON.parse('{"e":"Could not publish your page "}')},yQMC:function(e,t,n){"use strict";n.r(t);var a=n("KL1q"),i=n("UWqr"),r=n("Pk8u"),o=n("ut3N"),s=n("2q6Q"),c=n("hiL/"),d=n("X+PM"),l=n("sauU"),u=n("lF8N"),f=n("7plR"),p=n("xs0R"),m=n("PJr9"),_=n("q+wp"),h=n("WJXt"),b=n("XdGY"),g=n("mRj4"),v=n("bwg3"),y=function(){function e(){var t=this;this.enqueueClientFormSavePromise=function(n){t.getItemUpdateQueue().executeActionAsync(function(){var t=new s._QosMonitor("SPPageEnqueueClientFormSavePromise");return n.then(function(){t.writeSuccess()}).catch(function(n){var a=new c.PageServiceError(c.PageServiceErrorCode.FailedToSaveClientForm,n);f.e.actions.coreActions.showError(Object(v.n)(n),g.e,a),t.writeUnexpectedFailure("SPPageEnqueueClientFormSavePromise",a),o._TraceLogger.logError(e._logSource,a)})})},this._raiseServiceUpdate=function(){t.emitChange({type:c.PageEventType.FieldUpdate})},this._pageContext=f.e.instance.serviceScope.consume(d.PageContext.serviceKey);var n=Object(r.debounce)(function(){return t.emitChange({type:c.PageEventType.StartRouteTransition})},100),a=Object(r.debounce)(function(){return t.emitChange({type:c.PageEventType.EndRouteTransition})},100);p.t.addListener(function(){p.t.sliceUpdated.indexOf(m.e.PageStatusStore)>-1&&t.emitChange({type:c.PageEventType.StatusStoreUpdate}),p.t.sliceUpdated.indexOf(m.e.RouteStore)>-1&&(p.t.isTransitioning&&!p.t.didTransition?n():a()),!b.e.notifyStartDeferredComponents.isActivated()&&p.t.sliceUpdated.indexOf(m.e.RenderPhaseStore)>-1&&(p.t.renderDeferredComponents?t.emitChange({type:c.PageEventType.StartDeferredComponents}):t.emitChange({type:c.PageEventType.StopDeferredComponents}))}),this._eventNameMap=new Map([[c.PageEventType.FieldUpdate,"PageService_FieldUpdate"],[c.PageEventType.StatusStoreUpdate,"PageService_StatusStoreUpdate"],[c.PageEventType.StartRouteTransition,"PageService_StartRouteTransition"],[c.PageEventType.EndRouteTransition,"PageService_EndRouteTransition"],[c.PageEventType.StartDeferredComponents,"PageService_StartDeferredComponents"],[c.PageEventType.StopDeferredComponents,"PageService_StopDeferredComponents"]])}return e.prototype.getItemUpdateQueue=function(){return e._getItemQueue||(e._getItemQueue=u.e.instance),e._getItemQueue},e.prototype.getChromeOptions=function(){return Promise.resolve(_.e.chromeOptions)},e.prototype.getCurrentItem=function(){return this._ensureClientForm()},e.prototype.updateCurrentItem=function(e){return void 0===e&&(e=!1),this._ensureClientForm(!0,e)},e.prototype.openPageSettingsPanel=function(e,t){return void 0===e&&(e=!1),this._pageSettingsPanePromise||(this._pageSettingsPanePromise=Object(h.t)(f.e.instance.serviceScope)),this._pageSettingsPanePromise.then(function(n){return n.toggle(e,t)})},e.prototype.saveCurrentItem=function(e){return this._getDeferredClientForm().then(function(t){return t.saveCurrentItem(e)})},e.prototype.getPagePublishInfo=function(){var e=p.t.fields,t=e.ModerationStatus,n=e.Modified;return Promise.resolve({moderationStatus:t,modified:n,saveStatus:p.t.saveStatus,enableModeration:p.t.listSettings.EnableModeration})},e.prototype.getPageBasicInfo=function(){var e=p.t.fields,t=e.Id,n=e.Version,a=e.PageLayoutType;return Promise.resolve({id:t,version:n,pageLayoutType:a})},e.prototype.getPageMultilingualInfo=function(){var e=p.t.fields,t=e.TranslatedLanguages,n=e.TranslationLanguage,a=e.TranslationSourceItemId,i=e.IsTranslation;return Promise.resolve({translatedLanguages:t,translationLanguage:n,translationSourceItemId:a,isTranslation:i})},e.prototype.subscribe=function(e,t,n){var a=this._eventNameMap.get(t);a&&i._SPEventManager.instance.registerEvent(a,e,n)},e.prototype.unsubscribe=function(e,t,n){var a=this._eventNameMap.get(t);a&&i._SPEventManager.instance.unregisterEvent(a,e,n)},e.prototype.emitChange=function(e){var t=this._eventNameMap.get(e.type);t&&i._SPEventManager.instance.raiseEvent(t,e)},e.prototype.getAutoSaver=function(){return f.e.instance.autoSaverPromise},e.prototype.getClientFormProvider=function(){var e=this;return this._deferredClientForm?Promise.resolve(this._deferredClientForm.getClientFormProvider()):Promise.all([n.e(4),n.e(5),n.e(113)]).then(n.bind(null,"iyU8")).then(function(t){var n=_.e.relativizeUrl(_.e.url(!0),!1);return e._deferredClientForm=new t.DeferredClientForm(n,e._raiseServiceUpdate),e._deferredClientForm.getClientFormProvider()})},e.prototype.invalidatePageNavigationCache=function(){_.e.context.navigator.invalidate(this._pageContext.web.serverRelativeUrl),_.e.context.navigator.invalidate(new RegExp(this._pageContext.web.serverRelativeUrl+"/?SitePages/.+"));var e=this._pageContext.web.absoluteUrl,t=new a.Async;t.setTimeout(function(){t.dispose(),i._SPEventManager.instance.raiseEvent(l.e.invalidateCacheEventName,{urlPrefixes:[e]})},0)},e.prototype._getDeferredClientForm=function(){var e=this;return this._deferredClientForm?Promise.resolve(this._deferredClientForm):Promise.all([n.e(4),n.e(5),n.e(113)]).then(n.bind(null,"iyU8")).then(function(t){var n=_.e.relativizeUrl(_.e.url(!0),!1);return e._deferredClientForm=new t.DeferredClientForm(n,e._raiseServiceUpdate),e._deferredClientForm})},e.prototype._ensureClientForm=function(e,t){return void 0===e&&(e=!1),void 0===t&&(t=!1),this._getDeferredClientForm().then(function(n){return n.ensureClientForm(e,t)})},e._logSource=o._LogSource.create("SPPageServiceProvider"),e}();t.default=y}}]);